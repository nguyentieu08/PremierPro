<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PREMIER PRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #050505; color: white; font-family: 'Inter', sans-serif; }
        .player-container {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 24px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            border: 1px solid rgba(255,255,255,0.05);
        }
        #player { width: 100%; height: 100%; }
        .glass-panel {
            background: rgba(15, 15, 15, 0.8);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.05);
        }
        .animate-glow {
            animation: glow 2s infinite alternate;
        }
        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(239, 68, 68, 0.2); }
            to { box-shadow: 0 0 25px rgba(239, 68, 68, 0.5); }
        }
    </style>
</head>
<body class="flex flex-col items-center p-4 min-h-screen">

    <!-- HEADER -->
    <div class="w-full max-w-lg mt-8 mb-8 text-center">
        <h1 class="text-4xl font-black tracking-tighter italic">PREMIER <span class="text-red-600">PRO</span></h1>
        <p class="text-gray-500 text-[10px] uppercase tracking-[0.3em] mt-2">Hệ thống phát nhạc không giới hạn</p>
    </div>

    <!-- SEARCH -->
    <div class="w-full max-w-lg space-y-6">
        <div class="relative group">
            <input type="text" id="videoUrl" placeholder="Dán link video YouTube tại đây..." 
                class="w-full bg-[#121212] border border-white/10 rounded-2xl py-5 px-6 outline-none focus:border-red-600 focus:ring-4 focus:ring-red-600/10 transition-all text-sm">
            <button onclick="loadVideo()" class="absolute right-3 top-1/2 -translate-y-1/2 bg-red-600 hover:bg-red-700 p-3 rounded-xl transition active:scale-95 shadow-lg">
                <i data-lucide="play" class="w-5 h-5 fill-white"></i>
            </button>
        </div>

        <!-- PLAYER AREA -->
        <div id="main-ui" class="hidden animate-in fade-in slide-in-from-bottom-6 duration-700">
            <div class="player-container animate-glow">
                <div id="player"></div>
            </div>

            <!-- MENU CONTROLS -->
            <div class="glass-panel rounded-[32px] p-6 mt-6 space-y-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <i data-lucide="settings" class="w-4 h-4 text-red-500"></i>
                        <span class="text-[10px] font-bold uppercase tracking-widest text-gray-400">Hệ thống điều khiển</span>
                    </div>
                    <span class="text-[10px] text-green-500 font-bold px-2 py-1 bg-green-500/10 rounded">KẾT NỐI OK</span>
                </div>

                <div class="grid grid-cols-1 gap-3">
                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-2xl">
                        <div class="flex items-center gap-3">
                            <i data-lucide="shield" class="w-5 h-5 text-blue-500"></i>
                            <span class="text-sm">Bypass Lỗi 150/153 (API Mode)</span>
                        </div>
                        <i data-lucide="check" class="text-green-500"></i>
                    </div>
                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-2xl">
                        <div class="flex items-center gap-3">
                            <i data-lucide="music" class="w-5 h-5 text-purple-500"></i>
                            <span class="text-sm">Phát âm thanh nền (Background)</span>
                        </div>
                        <i data-lucide="check" class="text-green-500"></i>
                    </div>
                </div>

                <div class="pt-4 border-t border-white/5">
                    <p class="text-[11px] text-gray-500 leading-relaxed text-center">
                        <b>Mẹo:</b> Khi video đang phát, bạn có thể thoát ra màn hình chính. Nếu nhạc dừng, hãy nhấn <b>Play</b> ở thanh thông báo hoặc màn hình khóa để tiếp tục nghe.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load YouTube IFrame API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        lucide.createIcons();

        function extractId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function loadVideo() {
            const url = document.getElementById('videoUrl').value;
            const id = extractId(url);

            if (!id) {
                alert("Vui lòng nhập link YouTube hợp lệ!");
                return;
            }

            document.getElementById('main-ui').classList.remove('hidden');

            if (player) {
                player.loadVideoById(id);
            } else {
                // Khởi tạo trình phát bằng API chính thức để tránh bị từ chối kết nối
                player = new YT.Player('player', {
                    height: '100%',
                    width: '100%',
                    videoId: id,
                    playerVars: {
                        'autoplay': 1,
                        'playsinline': 1,
                        'modestbranding': 1,
                        'rel': 0,
                        'enablejsapi': 1,
                        'origin': window.location.origin // Quan trọng để lách lỗi 150
                    },
                    events: {
                        'onReady': onPlayerReady
                    }
                });
            }

            // Đồng bộ Media Session để hiện nút Play ngoài màn hình khóa
            if ('mediaSession' in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: "YouTube Premier Pro",
                    artist: "Hệ thống Bypass v4.0",
                    artwork: [{ src: `https://i.ytimg.com/vi/${id}/hqdefault.jpg`, sizes: '480x360', type: 'image/jpg' }]
                });
            }
        }

        function onPlayerReady(event) {
            event.target.playVideo();
        }

        document.getElementById('videoUrl').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') loadVideo();
        });
    </script>
</body>
</html>

